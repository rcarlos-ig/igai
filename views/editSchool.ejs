<%- include('partials/header.ejs'); %>

<div class="card w-[320px] sm:w-1/2 lg:w-1/3">
  <div class="w-full">
    <h2>Editar a unidade</h2>
    <% if (locals.success) { %>
    <div class="success">
      <ul>
        <li><%= success %></li>
      </ul>
    </div>
    <% }; %> <% if (locals.errors) { %>
    <div class="error <%= errors == '' ? 'hidden' : '' %>">
      <ul>
        <% errors.forEach(error => { %>
        <li><%= error.msg %></li>
        <% }); %>
      </ul>
    </div>
    <% }; %>
    <form method="post" action="/edit-school" id="editSchoolForm">
      <div class="form-line">
        <label for="codigo">Código<span class="required">*</span></label>
        <div>
          <input
            type="number"
            name="codigo"
            id="codigo"
            value="<%= school.codigo %>"
            min="1"
            required
            autofocus
          />
        </div>
      </div>
      <div class="form-line">
        <label for="nome">Nome<span class="required">*</span></label>
        <div>
          <input
            type="text"
            name="nome"
            id="nome"
            minlength="3"
            value="<%= school.nome %>"
            required
          />
          <span
            class="hidden validation-error"
            id="nomeError"
            aria-live="polite"
          ></span>
        </div>
      </div>
      <div class="form-line">
        <label for="bairro">Bairro<span class="required">*</span></label>
        <div>
          <input
            type="text"
            name="bairro"
            id="bairro"
            minlength="3"
            value="<%= school.bairro %>"
            required
          />
          <span
            class="hidden validation-error"
            id="bairroError"
            aria-live="polite"
          ></span>
        </div>
      </div>
      <div class="form-line">
        <label for="ocupacao">Ocupação</label>
        <div>
          <input
            type="text"
            name="ocupacao"
            id="ocupacao"
            value="<%= school.ocupacao %>"
          />
        </div>
      </div>
      <div class="form-line">
        <label for="reservatorio">Reservatório</label>
        <div>
          <input
            type="text"
            name="reservatorio"
            id="reservatorio"
            value="<%= school.reservatorio %>"
          />
        </div>
      </div>
      <div class="form-line">
        <label for="ativa">Escola ativa?</label>
        <div class="mt-8 mb-4">
          <input type="checkbox" name="ativa" id="ativa" class="toggle" <%=
          school.ativa == true ? 'checked' : ''; %> />
          <label for="ativa">Unidade ativa?</label>
        </div>
      </div>
      <div class="flex justify-end gap-4 mt-6">
        <button
          type="button"
          class="button button-tertiary"
          onclick="window.location='<%= `/school?unidade=${school.codigo}` %>'"
        >
          Retornar
        </button>
        <button
          type="submit"
          class="button button-primary"
          id="editSchoolSubmit"
        >
          Editar
        </button>
      </div>
    </form>
  </div>
</div>

<%- include('partials/logoutButton.ejs'); %> <%- include('partials/footer.ejs');
%>
